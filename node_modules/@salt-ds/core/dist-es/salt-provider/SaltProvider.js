import { jsx } from 'react/jsx-runtime';
import { clsx } from 'clsx';
import React__default, { createContext, useContext, useMemo } from 'react';
import '../aria-announcer/AriaAnnouncerContext.js';
import '../utils/useFloatingUI/useFloatingUI.js';
import '../utils/useId.js';
import { useIsomorphicLayoutEffect } from '../utils/useIsomorphicLayoutEffect.js';
import { ViewportProvider } from '../viewport/ViewportProvider.js';
import '../accordion/AccordionGroup.js';
import '../accordion/AccordionPanel.js';
import '../accordion/Accordion.js';
import '../accordion/AccordionHeader.js';
import '../avatar/Avatar.js';
import '../badge/Badge.js';
import '../banner/Banner.js';
import '../banner/BannerActions.js';
import '../banner/BannerContent.js';
import '../border-item/BorderItem.js';
import '../border-layout/BorderLayout.js';
import { DEFAULT_BREAKPOINTS } from '../breakpoints/Breakpoints.js';
import '../button/Button.js';
import '../card/Card.js';
import '../card/InteractableCard.js';
import '../checkbox/Checkbox.js';
import '../checkbox/CheckboxGroup.js';
import { StyleInjectionProvider, useComponentCssInjection } from '@salt-ds/styles';
import { useWindow } from '@salt-ds/window';
import '@salt-ds/icons';
import '../combo-box/ComboBox.js';
import '../dialog/Dialog.js';
import '../dialog/DialogHeader.js';
import '../dialog/DialogActions.js';
import '../dialog/DialogContent.js';
import '../dialog/DialogContext.js';
import '../dialog/DialogCloseButton.js';
import '../drawer/Drawer.js';
import '../drawer/DrawerCloseButton.js';
import '../dropdown/Dropdown.js';
import '../file-drop-zone/FileDropZone.js';
import '../file-drop-zone/FileDropZoneIcon.js';
import '../file-drop-zone/FileDropZoneTrigger.js';
import '../flex-item/FlexItem.js';
import '../flex-layout/FlexLayout.js';
import '../flow-layout/FlowLayout.js';
import '../form-field/FormField.js';
import '../status-indicator/StatusIndicator.js';
import '../text/Text.js';
import '../text/Code.js';
import '../text/Display.js';
import '../text/Headings.js';
import '../text/Label.js';
import '../text/TextAction.js';
import '../text/TextNotation.js';
import '../form-field-context/FormFieldContext.js';
import '../grid-item/GridItem.js';
import '../grid-layout/GridLayout.js';
import '../input/Input.js';
import '../link/Link.js';
import '../link-card/LinkCard.js';
import '../list-control/ListControlContext.js';
import '../multiline-input/MultilineInput.js';
import '../navigation-item/NavigationItem.js';
import '../option/Option.js';
import '../option/OptionGroup.js';
import '../pagination/Pagination.js';
import '../pagination/Paginator.js';
import '../pagination/CompactInput.js';
import '../pagination/CompactPaginator.js';
import '../pagination/GoToInput.js';
import '../panel/Panel.js';
import '../pill/Pill.js';
import '../progress/CircularProgress/CircularProgress.js';
import '../progress/LinearProgress/LinearProgress.js';
import '../radio-button/RadioButton.js';
import '../radio-button/RadioButtonGroup.js';
import '../scrim/Scrim.js';
import '../spinner/Spinner.js';
import '../stack-layout/StackLayout.js';
import '../status-adornment/StatusAdornment.js';
import '../toast/Toast.js';
import '../toast/ToastContent.js';
import '../split-layout/SplitLayout.js';
import '../switch/Switch.js';
import '../toggle-button/ToggleButton.js';
import '../toggle-button-group/ToggleButtonGroup.js';
import '../toggle-button-group/ToggleButtonGroupContext.js';
import '../tooltip/Tooltip.js';
import '@floating-ui/react';
import { AriaAnnouncerProvider } from '../aria-announcer/AriaAnnouncerProvider.js';
import css_248z from './SaltProvider.css.js';

const DEFAULT_DENSITY = "medium";
const DEFAULT_THEME_NAME = "salt-theme";
const UNSTABLE_ADDITIONAL_THEME_NAME = "salt-theme-next";
const DEFAULT_MODE = "light";
const DEFAULT_CORNER = "sharp";
const DensityContext = createContext(DEFAULT_DENSITY);
const ThemeContext = createContext({
  theme: "",
  mode: DEFAULT_MODE,
  themeNext: false,
  UNSTABLE_corner: DEFAULT_CORNER
});
const BreakpointContext = createContext(DEFAULT_BREAKPOINTS);
const getThemeNames = (themeName, themeNext) => {
  if (themeNext) {
    return themeName === DEFAULT_THEME_NAME ? [DEFAULT_THEME_NAME, UNSTABLE_ADDITIONAL_THEME_NAME] : [DEFAULT_THEME_NAME, UNSTABLE_ADDITIONAL_THEME_NAME, themeName];
  } else {
    {
      return themeName === DEFAULT_THEME_NAME ? [DEFAULT_THEME_NAME] : [DEFAULT_THEME_NAME, themeName];
    }
  }
};
const createThemedChildren = ({
  children,
  themeName,
  density,
  mode,
  applyClassesTo,
  themeNext,
  corner
}) => {
  var _a;
  const themeNames = getThemeNames(themeName, themeNext);
  const themeNextProps = {
    "data-corner": corner
  };
  if (applyClassesTo === "root") {
    return children;
  } else if (applyClassesTo === "child") {
    if (React__default.isValidElement(children)) {
      return React__default.cloneElement(children, {
        className: clsx(
          (_a = children.props) == null ? void 0 : _a.className,
          ...themeNames,
          `salt-density-${density}`
        ),
        "data-mode": mode,
        ...themeNext ? themeNextProps : {}
      });
    } else {
      console.warn(
        `
SaltProvider can only apply CSS classes for theming to a single nested child element of the SaltProvider.
        Either wrap elements with a single container or consider removing the applyClassesToChild prop, in which case a
        div element will wrap your child elements`
      );
      return children;
    }
  } else {
    return /* @__PURE__ */ jsx("div", {
      className: clsx(
        `salt-provider`,
        ...themeNames,
        `salt-density-${density}`
      ),
      "data-mode": mode,
      ...themeNext ? themeNextProps : {},
      children
    });
  }
};
function InternalSaltProvider({
  applyClassesTo: applyClassesToProp,
  children,
  density: densityProp,
  theme: themeProp,
  mode: modeProp,
  breakpoints: breakpointsProp,
  themeNext,
  corner: cornerProp
}) {
  var _a, _b;
  const inheritedDensity = useContext(DensityContext);
  const {
    theme: inheritedTheme,
    mode: inheritedMode,
    window: inheritedWindow,
    UNSTABLE_corner: inheritedCorner
  } = useContext(ThemeContext);
  const isRootProvider = inheritedTheme === void 0 || inheritedTheme === "";
  const density = (_a = densityProp != null ? densityProp : inheritedDensity) != null ? _a : DEFAULT_DENSITY;
  const themeName = themeProp != null ? themeProp : inheritedTheme === "" ? DEFAULT_THEME_NAME : inheritedTheme;
  const mode = modeProp != null ? modeProp : inheritedMode;
  const breakpoints = breakpointsProp != null ? breakpointsProp : DEFAULT_BREAKPOINTS;
  const corner = (_b = cornerProp != null ? cornerProp : inheritedCorner) != null ? _b : DEFAULT_CORNER;
  const applyClassesTo = applyClassesToProp != null ? applyClassesToProp : isRootProvider ? "root" : "scope";
  const targetWindow = useWindow();
  useComponentCssInjection({
    testId: "salt-provider",
    css: css_248z,
    window: targetWindow
  });
  const themeContextValue = useMemo(
    () => ({
      theme: themeName,
      mode,
      window: targetWindow,
      themeNext: Boolean(themeNext),
      UNSTABLE_corner: corner
    }),
    [themeName, mode, targetWindow, themeNext, corner]
  );
  const themedChildren = createThemedChildren({
    children,
    themeName,
    density,
    mode,
    applyClassesTo,
    themeNext,
    corner
  });
  useIsomorphicLayoutEffect(() => {
    const themeNames = getThemeNames(themeName, themeNext);
    if (applyClassesTo === "root" && targetWindow) {
      if (inheritedWindow != targetWindow) {
        targetWindow.document.documentElement.classList.add(
          ...themeNames,
          `salt-density-${density}`
        );
        targetWindow.document.documentElement.dataset.mode = mode;
        if (themeNext) {
          targetWindow.document.documentElement.dataset.corner = corner;
        }
      } else {
        console.warn(
          "SaltProvider can only apply CSS classes to the root if it is the root level SaltProvider."
        );
      }
    }
    return () => {
      if (applyClassesTo === "root" && targetWindow) {
        targetWindow.document.documentElement.classList.remove(
          ...themeNames,
          `salt-density-${density}`
        );
        targetWindow.document.documentElement.dataset.mode = void 0;
        if (themeNext) {
          delete targetWindow.document.documentElement.dataset.corner;
        }
      }
    };
  }, [
    applyClassesTo,
    density,
    mode,
    themeName,
    targetWindow,
    inheritedWindow,
    themeNext,
    corner
  ]);
  const saltProvider = /* @__PURE__ */ jsx(DensityContext.Provider, {
    value: density,
    children: /* @__PURE__ */ jsx(ThemeContext.Provider, {
      value: themeContextValue,
      children: /* @__PURE__ */ jsx(BreakpointContext.Provider, {
        value: breakpoints,
        children: /* @__PURE__ */ jsx(ViewportProvider, {
          children: themedChildren
        })
      })
    })
  });
  if (isRootProvider) {
    return /* @__PURE__ */ jsx(AriaAnnouncerProvider, {
      children: saltProvider
    });
  } else {
    return saltProvider;
  }
}
function SaltProvider({
  enableStyleInjection,
  ...restProps
}) {
  return /* @__PURE__ */ jsx(StyleInjectionProvider, {
    value: enableStyleInjection,
    children: /* @__PURE__ */ jsx(InternalSaltProvider, {
      ...restProps
    })
  });
}
function UNSTABLE_SaltProviderNext({
  enableStyleInjection,
  ...restProps
}) {
  return /* @__PURE__ */ jsx(StyleInjectionProvider, {
    value: enableStyleInjection,
    children: /* @__PURE__ */ jsx(InternalSaltProvider, {
      ...restProps,
      themeNext: true
    })
  });
}
const useTheme = () => {
  const { window, ...contextWithoutWindow } = useContext(ThemeContext);
  return contextWithoutWindow;
};
function useDensity(density) {
  var _a;
  const densityFromContext = useContext(DensityContext);
  return (_a = density != null ? density : densityFromContext) != null ? _a : DEFAULT_DENSITY;
}
const useBreakpoints = () => {
  return useContext(BreakpointContext);
};

export { BreakpointContext, DEFAULT_DENSITY, DensityContext, SaltProvider, ThemeContext, UNSTABLE_SaltProviderNext, useBreakpoints, useDensity, useTheme };
//# sourceMappingURL=SaltProvider.js.map
