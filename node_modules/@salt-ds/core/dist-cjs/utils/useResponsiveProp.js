'use strict';

Object.defineProperty(exports, '__esModule', { value: true });

var SaltProvider = require('../salt-provider/SaltProvider.js');
var ViewportProvider = require('../viewport/ViewportProvider.js');

const getCurrentBreakpoint = (breakpoints, width) => {
  const breakpointList = Object.entries(breakpoints).sort(
    ([, a], [, b]) => a - b
  );
  const [currentBreakpoint] = breakpointList.reduce((acc, val) => {
    const [, accWidth] = acc;
    const [breakpoint, breakpointWidth] = val;
    if (breakpointWidth < width && breakpointWidth > accWidth) {
      return [breakpoint, breakpointWidth];
    }
    return [...acc];
  }, breakpointList[0]);
  return currentBreakpoint;
};
const useCurrentBreakpoint = () => {
  const viewport = ViewportProvider.useViewport();
  const breakpoints = SaltProvider.useBreakpoints();
  return getCurrentBreakpoint(breakpoints, viewport);
};
const useOrderedBreakpoints = () => {
  const breakpoints = SaltProvider.useBreakpoints();
  return Object.entries(breakpoints).sort(([, a], [, b]) => a - b).map(([key]) => key);
};
const isObject = (value) => {
  const type = typeof value;
  return value !== null && (type === "object" || type === "function");
};
const hasBreakpointValues = (value, breakpoints) => {
  return isObject(value) && Object.keys(value).every((key) => key in breakpoints);
};
const getResponsiveValue = (breakpointValues, breakpoints, viewport, defaultValue) => {
  return Object.entries(breakpointValues).reduce(
    (acc, val) => {
      const [accWidth] = acc;
      const [breakpoint, breakpointValue] = val;
      const breakpointWidth = breakpoints[breakpoint];
      if (breakpointWidth >= accWidth && breakpointWidth <= breakpoints[viewport]) {
        return [breakpointWidth, breakpointValue];
      }
      return acc;
    },
    [0, defaultValue]
  )[1];
};
const useResponsiveProp = (value, defaultValue) => {
  const breakpoints = SaltProvider.useBreakpoints();
  const viewport = ViewportProvider.useViewport();
  if (value === defaultValue)
    return defaultValue;
  const currentViewport = getCurrentBreakpoint(breakpoints, viewport);
  if (hasBreakpointValues(value, breakpoints)) {
    return getResponsiveValue(
      value,
      breakpoints,
      currentViewport,
      defaultValue
    );
  }
  return value;
};

exports.getCurrentBreakpoint = getCurrentBreakpoint;
exports.useCurrentBreakpoint = useCurrentBreakpoint;
exports.useOrderedBreakpoints = useOrderedBreakpoints;
exports.useResponsiveProp = useResponsiveProp;
//# sourceMappingURL=useResponsiveProp.js.map
