import { useControlled } from '@salt-ds/core';
import { useCallback } from 'react';

const editKeys = /* @__PURE__ */ new Set(["Enter", " "]);
const isEditKey = (key) => editKeys.has(key);
const useEditableItem = ({
  editing: editingProp,
  highlightedIdx,
  indexPositions,
  onEnterEditMode: onEnterEditModeProp,
  onExitEditMode: onExitEditModeProp
}) => {
  const [editing, setEditing] = useControlled({
    controlled: editingProp,
    default: false,
    name: "useEditableItem",
    state: "editing"
  });
  const onEnterEditMode = useCallback(() => {
    setEditing(true);
    onEnterEditModeProp == null ? void 0 : onEnterEditModeProp();
  }, [onEnterEditModeProp, setEditing]);
  const onExitEditMode = (originalValue, editedValue, allowDeactivation, tabIndex) => {
    setEditing(false);
    console.log("exit edit mode");
    onExitEditModeProp == null ? void 0 : onExitEditModeProp(
      originalValue,
      editedValue,
      allowDeactivation,
      tabIndex
    );
  };
  const onKeyDown = useCallback(
    (evt) => {
      var _a, _b;
      console.log(`useEditableItem onKeyDown ${highlightedIdx}`, {
        editable: (_a = indexPositions[highlightedIdx]) == null ? void 0 : _a.editable
      });
      if (isEditKey(evt.key) && ((_b = indexPositions[highlightedIdx]) == null ? void 0 : _b.editable)) {
        onEnterEditMode();
      }
    },
    [onEnterEditMode, highlightedIdx, indexPositions]
  );
  return {
    editing,
    onKeyDown,
    onEnterEditMode,
    onExitEditMode,
    setEditing
  };
};

export { useEditableItem };
//# sourceMappingURL=useEditableItem.js.map
