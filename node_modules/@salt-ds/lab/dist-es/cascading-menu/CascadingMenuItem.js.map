{"version":3,"file":"CascadingMenuItem.js","sources":["../src/cascading-menu/CascadingMenuItem.tsx"],"sourcesContent":["import { makePrefixer, Tooltip } from \"@salt-ds/core\";\nimport { ChevronRightIcon } from \"@salt-ds/icons\";\nimport { clsx } from \"clsx\";\nimport {\n  forwardRef,\n  KeyboardEvent,\n  MouseEvent,\n  useEffect,\n  useRef,\n  useState,\n} from \"react\";\nimport { ListItem, ListItemProps } from \"../list-deprecated\";\nimport { MenuDescriptor } from \"./CascadingMenuProps\";\n\nimport { useWindow } from \"@salt-ds/window\";\nimport { useComponentCssInjection } from \"@salt-ds/styles\";\n\nimport cascadingMenuItemCss from \"./CascadingMenuItem.css\";\n\nconst noop = () => undefined;\nconst withBaseName = makePrefixer(\"saltMenuItem\");\n\nconst getIcon = (sourceItem: MenuDescriptor, isDisabled = false) => {\n  const CustomIcon = sourceItem.icon;\n  if (CustomIcon) {\n    return (\n      <CustomIcon\n        className={clsx(withBaseName(\"menuItemStartAdornment\"), {\n          [withBaseName(\"menuItemDisabled\")]: isDisabled,\n        })}\n      />\n    );\n  } else {\n    return null;\n  }\n};\n\nexport interface MenuItemProps extends ListItemProps<MenuDescriptor> {\n  blurSelected: boolean;\n  className?: string;\n  hasEndAdornment: boolean;\n  hasScrollbar: boolean;\n  hasStartAdornment: boolean;\n  hasSubMenu: boolean;\n  isInteracted: boolean;\n  isChildMenuOpen: boolean;\n  isNavigatingWithKeyboard: boolean;\n  itemToString: Required<ListItemProps<MenuDescriptor>>[\"itemToString\"];\n  onItemClick?: (\n    sourceItem: MenuDescriptor,\n    event: MouseEvent | KeyboardEvent\n  ) => void;\n  sourceItem: MenuDescriptor;\n  tooltipEnterDelay: number;\n  tooltipLeaveDelay: number;\n}\n\nexport const DefaultMenuItem = forwardRef<HTMLDivElement, MenuItemProps>(\n  function (props, ref) {\n    const {\n      blurSelected,\n      className,\n      hasEndAdornment,\n      hasScrollbar,\n      hasStartAdornment,\n      onItemClick,\n      itemToString,\n      isInteracted,\n      isNavigatingWithKeyboard,\n      isChildMenuOpen,\n      hasSubMenu,\n      sourceItem,\n      tooltipEnterDelay,\n      tooltipLeaveDelay,\n      ...restProps\n    } = props;\n\n    const targetWindow = useWindow();\n    useComponentCssInjection({\n      testId: \"salt-cascading-menu-item\",\n      css: cascadingMenuItemCss,\n      window: targetWindow,\n    });\n\n    const menuTextRef = useRef<HTMLDivElement>(null);\n    const [hasTooltip, setHasTooltip] = useState(false);\n    const menuText = itemToString(sourceItem);\n\n    useEffect(() => {\n      const element = menuTextRef.current;\n      if (element) {\n        if (element.offsetWidth < element.scrollWidth) {\n          setHasTooltip(true);\n        }\n      }\n    }, [menuText]);\n\n    const isDisabled = sourceItem.disabled;\n    const divider = sourceItem.divider;\n\n    const onClick = isDisabled || hasSubMenu ? noop : onItemClick;\n\n    const handleOnClick = (event: MouseEvent) => {\n      if (!isDisabled && !hasSubMenu) {\n        onClick?.(sourceItem, event);\n      }\n    };\n    const interactionClasses = isNavigatingWithKeyboard\n      ? {\n          [withBaseName(`menuItemKeyboardActive`)]:\n            !isDisabled && isInteracted && !blurSelected,\n          [withBaseName(`menuItemKeyboardDisabled`)]:\n            isDisabled && isInteracted,\n        }\n      : {\n          [withBaseName(`menuItemHover`)]: !isDisabled && !blurSelected,\n        };\n\n    const icon = hasStartAdornment ? getIcon(sourceItem, isDisabled) : null;\n    const tooltipTitle = sourceItem.tooltip || menuText;\n\n    return (\n      <Tooltip\n        disableFocusListener\n        disableHoverListener\n        enterDelay={tooltipEnterDelay}\n        leaveDelay={tooltipLeaveDelay}\n        placement=\"top\"\n        disabled={!tooltipTitle || !hasTooltip || isChildMenuOpen}\n        content={tooltipTitle}\n      >\n        <ListItem\n          ref={ref}\n          aria-expanded={isChildMenuOpen || undefined}\n          className={clsx(\n            withBaseName(),\n            {\n              [withBaseName(\"menuItemDivider\")]: divider,\n              [withBaseName(\"menuItemBlurSelected\")]: blurSelected,\n              [withBaseName(\"menuItemSelected\")]:\n                !isDisabled && !hasSubMenu && isInteracted,\n              ...interactionClasses,\n              [withBaseName(\"menuItemWithScrollbar\")]: hasScrollbar,\n            },\n            className\n          )}\n          disabled={isDisabled}\n          role=\"menuitem\"\n          onClick={handleOnClick}\n          item={sourceItem}\n          // TODO highlightProps - see original code?\n          {...restProps}\n        >\n          {hasStartAdornment && (\n            <div className={withBaseName(\"menuItemStartAdornmentContainer\")}>\n              {icon}\n            </div>\n          )}\n          <div\n            className={clsx(withBaseName(\"menuItemText\"), {\n              [withBaseName(\"menuItemDisabled\")]: isDisabled,\n            })}\n            ref={menuTextRef}\n          >\n            {menuText}\n          </div>\n          {hasEndAdornment && (\n            <div\n              className={clsx(withBaseName(\"menuItemEndAdornmentContainer\"), {\n                [withBaseName(\"menuItemAdornmentHidden\")]: !hasSubMenu,\n              })}\n            >\n              <ChevronRightIcon\n                className={clsx(withBaseName(\"menuItemEndAdornment\"), {\n                  [withBaseName(\"menuItemDisabled\")]: isDisabled,\n                })}\n              />\n            </div>\n          )}\n          {divider && <div role=\"separator\" />}\n        </ListItem>\n      </Tooltip>\n    );\n  }\n);\n"],"names":["cascadingMenuItemCss","ListItem"],"mappings":";;;;;;;;;;;;;;;AAmBA,MAAM,OAAO,MAAM,KAAA,CAAA,CAAA;AACnB,MAAM,YAAA,GAAe,aAAa,cAAc,CAAA,CAAA;AAEhD,MAAM,OAAU,GAAA,CAAC,UAA4B,EAAA,UAAA,GAAa,KAAU,KAAA;AAClE,EAAA,MAAM,aAAa,UAAW,CAAA,IAAA,CAAA;AAC9B,EAAA,IAAI,UAAY,EAAA;AACd,IAAA,uBACG,GAAA,CAAA,UAAA,EAAA;AAAA,MACC,SAAW,EAAA,IAAA,CAAK,YAAa,CAAA,wBAAwB,CAAG,EAAA;AAAA,QACtD,CAAC,YAAa,CAAA,kBAAkB,CAAI,GAAA,UAAA;AAAA,OACrC,CAAA;AAAA,KACH,CAAA,CAAA;AAAA,GAEG,MAAA;AACL,IAAO,OAAA,IAAA,CAAA;AAAA,GACT;AACF,CAAA,CAAA;AAsBO,MAAM,eAAkB,GAAA,UAAA;AAAA,EAC7B,SAAU,OAAO,GAAK,EAAA;AACpB,IAAM,MAAA;AAAA,MACJ,YAAA;AAAA,MACA,SAAA;AAAA,MACA,eAAA;AAAA,MACA,YAAA;AAAA,MACA,iBAAA;AAAA,MACA,WAAA;AAAA,MACA,YAAA;AAAA,MACA,YAAA;AAAA,MACA,wBAAA;AAAA,MACA,eAAA;AAAA,MACA,UAAA;AAAA,MACA,UAAA;AAAA,MACA,iBAAA;AAAA,MACA,iBAAA;AAAA,MACG,GAAA,SAAA;AAAA,KACD,GAAA,KAAA,CAAA;AAEJ,IAAA,MAAM,eAAe,SAAU,EAAA,CAAA;AAC/B,IAAyB,wBAAA,CAAA;AAAA,MACvB,MAAQ,EAAA,0BAAA;AAAA,MACR,GAAK,EAAAA,QAAA;AAAA,MACL,MAAQ,EAAA,YAAA;AAAA,KACT,CAAA,CAAA;AAED,IAAM,MAAA,WAAA,GAAc,OAAuB,IAAI,CAAA,CAAA;AAC/C,IAAA,MAAM,CAAC,UAAA,EAAY,aAAa,CAAA,GAAI,SAAS,KAAK,CAAA,CAAA;AAClD,IAAM,MAAA,QAAA,GAAW,aAAa,UAAU,CAAA,CAAA;AAExC,IAAA,SAAA,CAAU,MAAM;AACd,MAAA,MAAM,UAAU,WAAY,CAAA,OAAA,CAAA;AAC5B,MAAA,IAAI,OAAS,EAAA;AACX,QAAI,IAAA,OAAA,CAAQ,WAAc,GAAA,OAAA,CAAQ,WAAa,EAAA;AAC7C,UAAA,aAAA,CAAc,IAAI,CAAA,CAAA;AAAA,SACpB;AAAA,OACF;AAAA,KACF,EAAG,CAAC,QAAQ,CAAC,CAAA,CAAA;AAEb,IAAA,MAAM,aAAa,UAAW,CAAA,QAAA,CAAA;AAC9B,IAAA,MAAM,UAAU,UAAW,CAAA,OAAA,CAAA;AAE3B,IAAM,MAAA,OAAA,GAAU,UAAc,IAAA,UAAA,GAAa,IAAO,GAAA,WAAA,CAAA;AAElD,IAAM,MAAA,aAAA,GAAgB,CAAC,KAAsB,KAAA;AAC3C,MAAI,IAAA,CAAC,UAAc,IAAA,CAAC,UAAY,EAAA;AAC9B,QAAA,OAAA,IAAA,IAAA,GAAA,KAAA,CAAA,GAAA,OAAA,CAAU,UAAY,EAAA,KAAA,CAAA,CAAA;AAAA,OACxB;AAAA,KACF,CAAA;AACA,IAAA,MAAM,qBAAqB,wBACvB,GAAA;AAAA,MACE,CAAC,YAAa,CAAA,CAAA,sBAAA,CAAwB,IACpC,CAAC,UAAA,IAAc,gBAAgB,CAAC,YAAA;AAAA,MAClC,CAAC,YAAA,CAAa,CAA0B,wBAAA,CAAA,CAAA,GACtC,UAAc,IAAA,YAAA;AAAA,KAElB,GAAA;AAAA,MACE,CAAC,YAAa,CAAA,CAAA,aAAA,CAAe,CAAI,GAAA,CAAC,cAAc,CAAC,YAAA;AAAA,KACnD,CAAA;AAEJ,IAAA,MAAM,IAAO,GAAA,iBAAA,GAAoB,OAAQ,CAAA,UAAA,EAAY,UAAU,CAAI,GAAA,IAAA,CAAA;AACnE,IAAM,MAAA,YAAA,GAAe,WAAW,OAAW,IAAA,QAAA,CAAA;AAE3C,IAAA,uBACG,GAAA,CAAA,OAAA,EAAA;AAAA,MACC,oBAAoB,EAAA,IAAA;AAAA,MACpB,oBAAoB,EAAA,IAAA;AAAA,MACpB,UAAY,EAAA,iBAAA;AAAA,MACZ,UAAY,EAAA,iBAAA;AAAA,MACZ,SAAU,EAAA,KAAA;AAAA,MACV,QAAU,EAAA,CAAC,YAAgB,IAAA,CAAC,UAAc,IAAA,eAAA;AAAA,MAC1C,OAAS,EAAA,YAAA;AAAA,MAET,QAAC,kBAAA,IAAA,CAAAC,SAAA,EAAA;AAAA,QACC,GAAA;AAAA,QACA,iBAAe,eAAmB,IAAA,KAAA,CAAA;AAAA,QAClC,SAAW,EAAA,IAAA;AAAA,UACT,YAAa,EAAA;AAAA,UACb;AAAA,YACE,CAAC,YAAa,CAAA,iBAAiB,CAAI,GAAA,OAAA;AAAA,YACnC,CAAC,YAAa,CAAA,sBAAsB,CAAI,GAAA,YAAA;AAAA,YACxC,CAAC,YAAa,CAAA,kBAAkB,IAC9B,CAAC,UAAA,IAAc,CAAC,UAAc,IAAA,YAAA;AAAA,YAChC,GAAG,kBAAA;AAAA,YACH,CAAC,YAAa,CAAA,uBAAuB,CAAI,GAAA,YAAA;AAAA,WAC3C;AAAA,UACA,SAAA;AAAA,SACF;AAAA,QACA,QAAU,EAAA,UAAA;AAAA,QACV,IAAK,EAAA,UAAA;AAAA,QACL,OAAS,EAAA,aAAA;AAAA,QACT,IAAM,EAAA,UAAA;AAAA,QAEL,GAAG,SAAA;AAAA,QAEH,QAAA,EAAA;AAAA,UAAA,iBAAA,oBACE,GAAA,CAAA,KAAA,EAAA;AAAA,YAAI,SAAA,EAAW,aAAa,iCAAiC,CAAA;AAAA,YAC3D,QAAA,EAAA,IAAA;AAAA,WACH,CAAA;AAAA,0BAED,GAAA,CAAA,KAAA,EAAA;AAAA,YACC,SAAW,EAAA,IAAA,CAAK,YAAa,CAAA,cAAc,CAAG,EAAA;AAAA,cAC5C,CAAC,YAAa,CAAA,kBAAkB,CAAI,GAAA,UAAA;AAAA,aACrC,CAAA;AAAA,YACD,GAAK,EAAA,WAAA;AAAA,YAEJ,QAAA,EAAA,QAAA;AAAA,WACH,CAAA;AAAA,UACC,mCACE,GAAA,CAAA,KAAA,EAAA;AAAA,YACC,SAAW,EAAA,IAAA,CAAK,YAAa,CAAA,+BAA+B,CAAG,EAAA;AAAA,cAC7D,CAAC,YAAA,CAAa,yBAAyB,CAAA,GAAI,CAAC,UAAA;AAAA,aAC7C,CAAA;AAAA,YAED,QAAC,kBAAA,GAAA,CAAA,gBAAA,EAAA;AAAA,cACC,SAAW,EAAA,IAAA,CAAK,YAAa,CAAA,sBAAsB,CAAG,EAAA;AAAA,gBACpD,CAAC,YAAa,CAAA,kBAAkB,CAAI,GAAA,UAAA;AAAA,eACrC,CAAA;AAAA,aACH,CAAA;AAAA,WACF,CAAA;AAAA,UAED,2BAAY,GAAA,CAAA,KAAA,EAAA;AAAA,YAAI,IAAK,EAAA,WAAA;AAAA,WAAY,CAAA;AAAA,SAAA;AAAA,OACpC,CAAA;AAAA,KACF,CAAA,CAAA;AAAA,GAEJ;AACF;;;;"}