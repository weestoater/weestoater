import { jsx } from 'react/jsx-runtime';
import { createContext, useRef, useState } from 'react';
import { useIsomorphicLayoutEffect } from '@salt-ds/core';

const DescendantContext = createContext({});
function DescendantProvider({
  items,
  setItems,
  ...props
}) {
  const assigning = useRef(true);
  const [, forceUpdate] = useState();
  useIsomorphicLayoutEffect(() => {
    if (assigning.current) {
      assigning.current = false;
      forceUpdate({});
    } else {
      assigning.current = true;
    }
    return () => {
      if (assigning.current) {
        setItems([]);
      }
    };
  }, [items]);
  return /* @__PURE__ */ jsx(DescendantContext.Provider, {
    ...props,
    value: { setItems, assigning }
  });
}

export { DescendantContext, DescendantProvider };
//# sourceMappingURL=DescendantContext.js.map
