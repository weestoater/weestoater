{"version":3,"file":"ListBase.js","sources":["../src/list-deprecated/ListBase.tsx"],"sourcesContent":["import {\n  makePrefixer,\n  useForkRef,\n  useId,\n  useIsomorphicLayoutEffect,\n} from \"@salt-ds/core\";\nimport { clsx } from \"clsx\";\nimport {\n  Children,\n  ComponentType,\n  createContext,\n  ForwardedRef,\n  forwardRef,\n  HTMLAttributes,\n  memo,\n  ReactElement,\n  Ref,\n  useContext,\n  useImperativeHandle,\n  useMemo,\n  useRef,\n} from \"react\";\nimport { areEqual, FixedSizeList, VariableSizeList } from \"react-window\";\nimport { calcPreferredListHeight } from \"./internal/calcPreferredListHeight\";\nimport { scrollIntoView } from \"./internal/scrollIntoView\";\nimport { useListAutoSizer } from \"./internal/useListAutoSizer\";\nimport { itemToString as defaultItemToString } from \"./itemToString\";\nimport { ListItemBase } from \"./ListItemBase\";\nimport { ListItemContext } from \"./ListItemContext\";\nimport { ListBaseProps } from \"./ListProps\";\nimport { useListStateContext } from \"./ListStateContext\";\nimport { useListItem, useVirtualizedListItem } from \"./useListItem\";\n\nimport { useWindow } from \"@salt-ds/window\";\nimport { useComponentCssInjection } from \"@salt-ds/styles\";\n\nimport listCss from \"./List.css\";\n\nconst withBaseName = makePrefixer(\"saltListDeprecated\");\n\nexport interface ListboxContextProps<Item> {\n  borderless?: boolean;\n  className?: string;\n  disabled?: boolean;\n  disableFocus?: boolean;\n  getItemId?: (index: number) => string;\n  getItemHeight?: (index?: number) => number;\n  id?: string;\n  itemToString?: (item: Item) => string;\n  listRef?: Ref<any>;\n  style?: any;\n  onScroll?: (evt: any) => void;\n}\n\nconst ListboxContext = createContext<ListboxContextProps<any>>({});\nconst DefaultItem = memo(function DefaultItem(props: any) {\n  const { item, itemToString, itemProps } = useListItem(props);\n  return <ListItemBase {...itemProps}>{itemToString(item)}</ListItemBase>;\n}, areEqual);\n\nconst DefaultVirtualizedItem = memo(function DefaultVirtualizedItem(\n  props: any\n) {\n  const { item, itemToString, itemProps } = useVirtualizedListItem(props);\n  return <ListItemBase {...itemProps}>{itemToString(item)}</ListItemBase>;\n},\nareEqual);\n\nexport interface ListboxProps extends HTMLAttributes<HTMLDivElement> {\n  onScroll?: (evt: any) => void;\n}\n\n/**\n * Listbox is the container for all list items. It is used as `outerElement` for\n * `react-window`.\n *\n * forwardRef gives `react-window` a way to attach a ref to listen to \"scroll\" events.\n * And `onScroll` is added by `react-window` so we pass it on.\n */\nconst Listbox: ComponentType<ListboxProps> = forwardRef(function Listbox(\n  props,\n  ref\n) {\n  const { style, onScroll, children } = props;\n\n  const {\n    className,\n    borderless,\n    disabled,\n    disableFocus,\n    listRef,\n    style: styleProp,\n    onScroll: onScrollProp,\n    ...restListProps\n  } = useContext<ListboxContextProps<any>>(ListboxContext);\n\n  const setListRef = useForkRef(ref, listRef);\n\n  const handleScroll = (event: any) => {\n    if (onScroll) {\n      onScroll(event);\n    }\n\n    if (onScrollProp) {\n      onScrollProp(event);\n    }\n  };\n\n  return (\n    <div\n      className={clsx(\n        withBaseName(),\n        {\n          [withBaseName(\"disabled\")]: disabled,\n        },\n        className\n      )}\n      onScroll={handleScroll}\n      ref={setListRef}\n      style={{ ...style, ...styleProp }}\n      tabIndex={disabled || disableFocus ? undefined : 0}\n      {...restListProps}\n    >\n      {children}\n    </div>\n  );\n});\n\nexport interface ListScrollHandles<Item> {\n  scrollToIndex: (itemIndex: number) => void;\n  scrollToItem: (item: Item) => void;\n  scrollTo: (scrollOffset: number) => void;\n}\n\nconst noScrolling: ListScrollHandles<unknown> = {\n  scrollToIndex: (itemIndex: number) => undefined,\n  scrollToItem: (item) => undefined,\n  scrollTo: (scrollOffset: number) => undefined,\n};\n\nexport const ListBase = forwardRef(function ListBase<Item>(\n  props: ListBaseProps<Item>,\n  ref: ForwardedRef<ListScrollHandles<Item>>\n) {\n  const targetWindow = useWindow();\n  useComponentCssInjection({\n    testId: \"salt-list-deprecated\",\n    css: listCss,\n    window: targetWindow,\n  });\n\n  const { state } = useListStateContext();\n\n  // Getting list id in the following order:\n  // 1. Use the id prop if it's defined, otherwise..\n  // 2. Use the id from list context if it's defined, or finally...\n  // 3. Generate a random id.\n  const generatedId = useId(props.id);\n  const defaultId = state.id ?? generatedId;\n\n  // Removed useCharacteristic here\n  const sizeStackable = \"36px\";\n  const defaultItemHeight =\n    sizeStackable === null ? 36 : parseInt(sizeStackable, 10);\n\n  const hasIndexer = typeof props.getItemAtIndex === \"function\";\n  const hasVariableHeight = typeof props.getItemHeight === \"function\";\n\n  const {\n    id = defaultId,\n    source = [],\n    borderless,\n    children,\n    disableMouseDown,\n    itemTextHighlightPattern,\n    itemCount = source.length,\n    itemToString = defaultItemToString,\n    // TODO: Read from css variable\n    itemGapSize = 1,\n    itemHeight = defaultItemHeight,\n    getItemHeight = () => itemHeight,\n    getItemId = (index) => `${id}-item-${index}`,\n    getItemIndex = (item) => source.indexOf(item),\n    getItemAtIndex,\n    overscanCount = 10,\n    displayedItemCount = 10,\n    virtualized,\n    width,\n    height,\n    maxWidth,\n    maxHeight,\n    minWidth,\n    minHeight,\n    ListPlaceholder,\n    ListItem = virtualized ? DefaultVirtualizedItem : DefaultItem,\n    listRef: listRefProp,\n    ...restProps\n  } = props;\n\n  const { highlightedIndex } = state;\n\n  const preferredHeight =\n    height ??\n    calcPreferredListHeight({\n      borderless,\n      displayedItemCount,\n      itemCount,\n      itemHeight,\n      getItemHeight,\n      itemGapSize,\n    });\n\n  const [containerRef, autoSize] = useListAutoSizer<HTMLDivElement>({\n    responsive: width === undefined || height === undefined,\n    height: preferredHeight,\n    width,\n  });\n\n  /**\n   * This is used to access `react-window` API\n   * @see https://react-window.now.sh/#/api/FixedSizeList (under `Methods`)\n   */\n  const virtualizedListRef = useRef<any>(null);\n  const listRef = useRef<HTMLDivElement | null>(null);\n\n  const setListRef = useForkRef(listRef, listRefProp);\n\n  const scrollToIndex = (itemIndex: number) => {\n    scrollIntoView(\n      listRef.current?.querySelector(`[data-option-index=\"${itemIndex}\"]`),\n      listRef\n    );\n  };\n\n  const scrollHandles: ListScrollHandles<Item> = useMemo(\n    () => ({\n      scrollToIndex,\n      scrollToItem: (item: Item) => {\n        scrollToIndex(getItemIndex(item));\n      },\n      scrollTo: (scrollOffset: number) => {\n        if (listRef.current) {\n          listRef.current.scrollTop = scrollOffset;\n        }\n      },\n    }),\n    [getItemIndex]\n  );\n\n  const virtualizedScrollHandles: ListScrollHandles<Item> = useMemo(\n    () => ({\n      scrollToIndex: (itemIndex: number) => {\n        if (virtualizedListRef.current) {\n          virtualizedListRef.current.scrollToItem(itemIndex);\n        }\n      },\n      scrollToItem: (item: Item) => {\n        virtualizedListRef.current.scrollToItem(getItemIndex(item));\n      },\n      scrollTo: (scrollOffset: number) => {\n        virtualizedListRef.current.scrollTo(scrollOffset);\n      },\n    }),\n    [getItemIndex]\n  );\n\n  useImperativeHandle(\n    ref,\n    () => {\n      if (virtualized && virtualizedListRef.current) {\n        return virtualizedScrollHandles;\n      } else if (listRef.current) {\n        return scrollHandles;\n      } else {\n        return noScrolling;\n      }\n    },\n    [virtualized, scrollHandles, virtualizedScrollHandles]\n  );\n\n  useIsomorphicLayoutEffect(() => {\n    if (highlightedIndex == null) {\n      return;\n    }\n\n    if (virtualized && virtualizedListRef.current) {\n      virtualizedListRef.current.scrollToItem(highlightedIndex);\n    } else if (listRef.current) {\n      scrollToIndex(highlightedIndex);\n    }\n  }, [highlightedIndex, virtualized]);\n\n  const renderList = () => {\n    if (Children.count(children)) {\n      return (\n        <Listbox style={autoSize}>\n          <ListItemContext.Provider\n            value={{\n              disableMouseDown,\n              getItemId,\n              getItemHeight,\n              //@ts-ignore\n              itemToString,\n              itemTextHighlightPattern,\n            }}\n          >\n            {children}\n          </ListItemContext.Provider>\n        </Listbox>\n      );\n    }\n\n    if (virtualized) {\n      const VirtualizedList: any = hasVariableHeight\n        ? VariableSizeList\n        : FixedSizeList;\n\n      return (\n        <ListItemContext.Provider\n          value={{\n            disableMouseDown,\n            getItemId,\n            //@ts-ignore\n            itemToString,\n            itemTextHighlightPattern,\n          }}\n        >\n          <VirtualizedList\n            height={autoSize.height}\n            itemCount={itemCount}\n            itemData={source}\n            itemSize={hasVariableHeight ? getItemHeight : itemHeight}\n            outerElementType={Listbox}\n            overscanCount={overscanCount}\n            ref={virtualizedListRef}\n            width={autoSize.width}\n          >\n            {ListItem}\n          </VirtualizedList>\n        </ListItemContext.Provider>\n      );\n    }\n\n    return (\n      <Listbox style={autoSize}>\n        <ListItemContext.Provider\n          value={{\n            disableMouseDown,\n            getItemId,\n            getItemHeight,\n            //@ts-ignore\n            itemToString,\n            itemTextHighlightPattern,\n          }}\n        >\n          {(hasIndexer ? Array.from({ length: itemCount }) : source).map(\n            (item, index) => (\n              <ListItem\n                index={index}\n                // No, getItemAtIndex can NOT be undefined, because hasIndexer is confirming that already. stupid stupid typescript !!!\n                item={hasIndexer ? getItemAtIndex!(index) : item}\n                key={getItemId(index)}\n              />\n            )\n          )}\n        </ListItemContext.Provider>\n      </Listbox>\n    );\n  };\n\n  // TODO It's weird that List itself isn't the root element, ListWrapper is\n  // THat means if client passes style, with margin, for example, it will break;\n  return (\n    <div\n      className={clsx(withBaseName(\"wrapper\"), {\n        [withBaseName(\"borderless\")]: borderless,\n      })}\n      ref={containerRef}\n      style={{\n        minWidth,\n        minHeight,\n        width: width ?? \"100%\",\n        height: height ?? \"100%\",\n        maxWidth: maxWidth ?? width,\n        maxHeight: maxHeight ?? preferredHeight,\n      }}\n    >\n      {itemCount === 0 && ListPlaceholder !== undefined ? (\n        <ListPlaceholder style={autoSize} />\n      ) : (\n        <ListboxContext.Provider\n          value={{\n            ...restProps,\n            listRef: setListRef,\n            id,\n            borderless,\n          }}\n        >\n          {renderList()}\n        </ListboxContext.Provider>\n      )}\n    </div>\n  );\n}) as <Item>(\n  p: ListBaseProps<Item> & { ref?: ForwardedRef<ListScrollHandles<Item>> }\n) => ReactElement<ListBaseProps<Item>>;\n"],"names":["DefaultItem","DefaultVirtualizedItem","Listbox","ListBase","listCss","itemToString","defaultItemToString","_a"],"mappings":"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"}