{"version":3,"file":"useAutoSizer.js","sources":["../src/common-hooks/useAutoSizer.ts"],"sourcesContent":["import { RefObject, useState, useCallback } from \"react\";\nimport { useIsomorphicLayoutEffect } from \"@salt-ds/core\";\n\nexport interface ListAutosizerProps {\n  containerRef: RefObject<Element>;\n  responsive: boolean;\n  height?: number | string;\n  width?: number | string;\n}\n\ninterface size {\n  height?: number | string;\n  width?: number | string;\n}\n\nexport function useAutoSizer<Element extends HTMLElement>(\n  props: ListAutosizerProps\n): size {\n  const { containerRef: ref, responsive, width, height } = props;\n  const [size, setSize] = useState({ width, height });\n\n  const handleResize = useCallback(function handleResize(contentRect: DOMRect) {\n    if (contentRect.width > 0 && contentRect.height > 0) {\n      setSize({\n        width: contentRect.width,\n        height: contentRect.height,\n      });\n    }\n  }, []);\n\n  useIsomorphicLayoutEffect(() => {\n    setSize({ width, height });\n  }, [width, height]);\n\n  useIsomorphicLayoutEffect(() => {\n    if (responsive) {\n      let observer: ResizeObserver;\n      if (ref.current) {\n        handleResize(ref.current.getBoundingClientRect());\n        observer = new ResizeObserver(\n          ([{ contentRect }]: ResizeObserverEntry[]) => {\n            // TODO (currently firing because of scrollbar)\n            // handleResize(contentRect);\n          }\n        );\n        observer.observe(ref.current);\n      }\n      return () => {\n        if (observer) {\n          observer.disconnect();\n        }\n      };\n    }\n  }, [handleResize, responsive]);\n\n  return size;\n}\n"],"names":["handleResize"],"mappings":";;;AAeO,SAAS,aACd,KACM,EAAA;AACN,EAAA,MAAM,EAAE,YAAc,EAAA,GAAA,EAAK,UAAY,EAAA,KAAA,EAAO,QAAW,GAAA,KAAA,CAAA;AACzD,EAAM,MAAA,CAAC,MAAM,OAAO,CAAA,GAAI,SAAS,EAAE,KAAA,EAAO,QAAQ,CAAA,CAAA;AAElD,EAAA,MAAM,YAAe,GAAA,WAAA,CAAY,SAASA,aAAAA,CAAa,WAAsB,EAAA;AAC3E,IAAA,IAAI,WAAY,CAAA,KAAA,GAAQ,CAAK,IAAA,WAAA,CAAY,SAAS,CAAG,EAAA;AACnD,MAAQ,OAAA,CAAA;AAAA,QACN,OAAO,WAAY,CAAA,KAAA;AAAA,QACnB,QAAQ,WAAY,CAAA,MAAA;AAAA,OACrB,CAAA,CAAA;AAAA,KACH;AAAA,GACF,EAAG,EAAE,CAAA,CAAA;AAEL,EAAA,yBAAA,CAA0B,MAAM;AAC9B,IAAQ,OAAA,CAAA,EAAE,KAAO,EAAA,MAAA,EAAQ,CAAA,CAAA;AAAA,GACxB,EAAA,CAAC,KAAO,EAAA,MAAM,CAAC,CAAA,CAAA;AAElB,EAAA,yBAAA,CAA0B,MAAM;AAC9B,IAAA,IAAI,UAAY,EAAA;AACd,MAAI,IAAA,QAAA,CAAA;AACJ,MAAA,IAAI,IAAI,OAAS,EAAA;AACf,QAAa,YAAA,CAAA,GAAA,CAAI,OAAQ,CAAA,qBAAA,EAAuB,CAAA,CAAA;AAChD,QAAA,QAAA,GAAW,IAAI,cAAA;AAAA,UACb,CAAC,CAAC,EAAE,WAAA,EAAa,CAA6B,KAAA;AAAA,WAG9C;AAAA,SACF,CAAA;AACA,QAAS,QAAA,CAAA,OAAA,CAAQ,IAAI,OAAO,CAAA,CAAA;AAAA,OAC9B;AACA,MAAA,OAAO,MAAM;AACX,QAAA,IAAI,QAAU,EAAA;AACZ,UAAA,QAAA,CAAS,UAAW,EAAA,CAAA;AAAA,SACtB;AAAA,OACF,CAAA;AAAA,KACF;AAAA,GACC,EAAA,CAAC,YAAc,EAAA,UAAU,CAAC,CAAA,CAAA;AAE7B,EAAO,OAAA,IAAA,CAAA;AACT;;;;"}