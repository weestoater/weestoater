{"version":3,"file":"ListItem.js","sources":["../src/list/ListItem.tsx"],"sourcesContent":["import { ForwardedRef, forwardRef, HTMLAttributes } from \"react\";\nimport { clsx } from \"clsx\";\nimport { CheckboxIcon, makePrefixer } from \"@salt-ds/core\";\nimport { ListItemProps, ListItemType } from \"./listTypes\";\nimport { Highlighter } from \"./Highlighter\";\n\nimport { useWindow } from \"@salt-ds/window\";\nimport { useComponentCssInjection } from \"@salt-ds/styles\";\n\nimport listItemCss from \"./ListItem.css\";\n\nconst withBaseName = makePrefixer(\"saltListItem\");\n\n// A dummy ListItem rendered once and not visible. We measure this to\n// determine height of ListItem and monitor it for size changes (in\n// case of runtime density switch). This allows ListItem height to\n// be controlled purely through CSS.\nexport const ListItemProxy = forwardRef(function ListItemNextProxy(\n  props: HTMLAttributes<HTMLDivElement>,\n  forwardedRef: ForwardedRef<HTMLDivElement>\n) {\n  return (\n    <div\n      aria-hidden\n      className={clsx(withBaseName(), withBaseName(\"proxy\"))}\n      ref={forwardedRef}\n    />\n  );\n});\n\n// Note: the memo is effective if List label is passed as simple string\n// If children are used, it is the responsibility of caller to memoise\n// these if performance on highlight is perceived to be an issue.\nexport const ListItem = forwardRef<HTMLDivElement, ListItemProps>(\n  function ListItem(\n    {\n      children,\n      className: classNameProp,\n      disabled,\n      tabIndex,\n      item,\n      itemHeight,\n      itemTextHighlightPattern,\n      label,\n      selectable: _notUsed,\n      selected,\n      showCheckbox,\n      style: styleProp,\n      ...props\n    },\n    forwardedRef\n  ) {\n    const targetWindow = useWindow();\n    useComponentCssInjection({\n      testId: \"salt-list-item\",\n      css: listItemCss,\n      window: targetWindow,\n    });\n\n    const className = clsx(withBaseName(), classNameProp, {\n      saltDisabled: disabled,\n      [withBaseName(\"checkbox\")]: showCheckbox,\n    });\n    const style =\n      itemHeight !== undefined\n        ? {\n            ...styleProp,\n            height: itemHeight,\n          }\n        : styleProp;\n\n    return (\n      <div\n        className={className}\n        {...props}\n        aria-disabled={disabled || undefined}\n        aria-selected={selected || undefined}\n        ref={forwardedRef}\n        style={style}\n      >\n        {showCheckbox && <CheckboxIcon aria-hidden checked={selected} />}\n        {children && typeof children !== \"string\" ? (\n          children\n        ) : itemTextHighlightPattern == null ? (\n          <span className={withBaseName(\"textWrapper\")}>\n            {label || children}\n          </span>\n        ) : (\n          <Highlighter\n            matchPattern={itemTextHighlightPattern}\n            text={label || (children as string)}\n          />\n        )}\n      </div>\n    );\n  }\n) as ListItemType;\n"],"names":["ListItem","listItemCss"],"mappings":";;;;;;;;;AAWA,MAAM,YAAA,GAAe,aAAa,cAAc,CAAA,CAAA;AAMzC,MAAM,aAAgB,GAAA,UAAA,CAAW,SAAS,iBAAA,CAC/C,OACA,YACA,EAAA;AACA,EAAA,uBACG,GAAA,CAAA,KAAA,EAAA;AAAA,IACC,aAAW,EAAA,IAAA;AAAA,IACX,WAAW,IAAK,CAAA,YAAA,EAAgB,EAAA,YAAA,CAAa,OAAO,CAAC,CAAA;AAAA,IACrD,GAAK,EAAA,YAAA;AAAA,GACP,CAAA,CAAA;AAEJ,CAAC,EAAA;AAKM,MAAM,QAAW,GAAA,UAAA;AAAA,EACtB,SAASA,SACP,CAAA;AAAA,IACE,QAAA;AAAA,IACA,SAAW,EAAA,aAAA;AAAA,IACX,QAAA;AAAA,IACA,QAAA;AAAA,IACA,IAAA;AAAA,IACA,UAAA;AAAA,IACA,wBAAA;AAAA,IACA,KAAA;AAAA,IACA,UAAY,EAAA,QAAA;AAAA,IACZ,QAAA;AAAA,IACA,YAAA;AAAA,IACA,KAAO,EAAA,SAAA;AAAA,IACJ,GAAA,KAAA;AAAA,KAEL,YACA,EAAA;AACA,IAAA,MAAM,eAAe,SAAU,EAAA,CAAA;AAC/B,IAAyB,wBAAA,CAAA;AAAA,MACvB,MAAQ,EAAA,gBAAA;AAAA,MACR,GAAK,EAAAC,QAAA;AAAA,MACL,MAAQ,EAAA,YAAA;AAAA,KACT,CAAA,CAAA;AAED,IAAA,MAAM,SAAY,GAAA,IAAA,CAAK,YAAa,EAAA,EAAG,aAAe,EAAA;AAAA,MACpD,YAAc,EAAA,QAAA;AAAA,MACd,CAAC,YAAa,CAAA,UAAU,CAAI,GAAA,YAAA;AAAA,KAC7B,CAAA,CAAA;AACD,IAAM,MAAA,KAAA,GACJ,eAAe,KACX,CAAA,GAAA;AAAA,MACE,GAAG,SAAA;AAAA,MACH,MAAQ,EAAA,UAAA;AAAA,KAEV,GAAA,SAAA,CAAA;AAEN,IAAA,uBACG,IAAA,CAAA,KAAA,EAAA;AAAA,MACC,SAAA;AAAA,MACC,GAAG,KAAA;AAAA,MACJ,iBAAe,QAAY,IAAA,KAAA,CAAA;AAAA,MAC3B,iBAAe,QAAY,IAAA,KAAA,CAAA;AAAA,MAC3B,GAAK,EAAA,YAAA;AAAA,MACL,KAAA;AAAA,MAEC,QAAA,EAAA;AAAA,QAAA,YAAA,oBAAiB,GAAA,CAAA,YAAA,EAAA;AAAA,UAAa,aAAW,EAAA,IAAA;AAAA,UAAC,OAAS,EAAA,QAAA;AAAA,SAAU,CAAA;AAAA,QAC7D,YAAY,OAAO,QAAA,KAAa,WAC/B,QACE,GAAA,wBAAA,IAA4B,uBAC7B,GAAA,CAAA,MAAA,EAAA;AAAA,UAAK,SAAA,EAAW,aAAa,aAAa,CAAA;AAAA,UACxC,QAAS,EAAA,KAAA,IAAA,QAAA;AAAA,SACZ,oBAEC,GAAA,CAAA,WAAA,EAAA;AAAA,UACC,YAAc,EAAA,wBAAA;AAAA,UACd,MAAM,KAAU,IAAA,QAAA;AAAA,SAClB,CAAA;AAAA,OAAA;AAAA,KAEJ,CAAA,CAAA;AAAA,GAEJ;AACF;;;;"}