import { useState, useMemo, useCallback } from 'react';
import '@salt-ds/core';
import 'react/jsx-runtime';
import { useResizeObserver, HeightOnly } from '../responsive/useResizeObserver.js';

const useListHeight = ({
  borderless,
  displayedItemCount,
  getItemHeight,
  height,
  itemCount,
  itemGapSize,
  itemHeight: itemHeightProp,
  rowHeightRef
}) => {
  const [measuredItemHeight, setMeasuredItemHeight] = useState(36);
  const preferredHeight = useMemo(() => {
    let result = borderless ? 0 : 2;
    const itemHeight = itemHeightProp != null ? itemHeightProp : measuredItemHeight;
    const preferredItemCount = Math.min(displayedItemCount, itemCount) || displayedItemCount;
    if (typeof getItemHeight === "function") {
      result += Array(preferredItemCount).fill(0).reduce(
        (total, _, index) => total + getItemHeight(index) + itemGapSize,
        0
      ) - itemGapSize;
    } else {
      result += preferredItemCount * Number(itemHeight) + (preferredItemCount - 1) * itemGapSize;
    }
    return isNaN(result) ? void 0 : result;
  }, [
    borderless,
    displayedItemCount,
    getItemHeight,
    itemCount,
    itemGapSize,
    itemHeightProp,
    measuredItemHeight
  ]);
  const handleRowHeight = useCallback(({ height: height2 }) => {
    setMeasuredItemHeight(height2);
  }, []);
  useResizeObserver(rowHeightRef, HeightOnly, handleRowHeight, true);
  return {
    preferredHeight
  };
};

export { useListHeight };
//# sourceMappingURL=useListHeight.js.map
