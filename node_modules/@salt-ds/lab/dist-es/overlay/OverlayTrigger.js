import { jsx, Fragment } from 'react/jsx-runtime';
import { isValidElement, cloneElement } from 'react';
import { useForkRef, mergeProps } from '@salt-ds/core';
import { useOverlayContext } from './OverlayContext.js';

function OverlayTrigger(props) {
  const { children } = props;
  const { setOpen, reference, getReferenceProps, id } = useOverlayContext();
  const triggerRef = useForkRef(
    isValidElement(children) ? children.ref : null,
    reference
  );
  if (!children || !isValidElement(children)) {
    return /* @__PURE__ */ jsx(Fragment, {
      children
    });
  }
  const handleClick = (event) => {
    setOpen(event, true);
  };
  const getTriggerProps = () => getReferenceProps({
    ref: reference,
    onClick: handleClick,
    id: `${id}-trigger`,
    "aria-controls": `${id}-panel`
  });
  return /* @__PURE__ */ jsx(Fragment, {
    children: cloneElement(children, {
      ...mergeProps(getTriggerProps(), children.props),
      ref: triggerRef
    })
  });
}

export { OverlayTrigger };
//# sourceMappingURL=OverlayTrigger.js.map
