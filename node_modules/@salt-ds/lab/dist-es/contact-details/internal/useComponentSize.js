import { useState, useRef, useCallback } from 'react';
import { useIsomorphicLayoutEffect } from '@salt-ds/core';

function useComponentSize(initialWidth) {
  const [size, setSize] = useState({ width: initialWidth });
  const ref = useRef(null);
  const handleResize = useCallback(
    function handleResize2({
      width,
      height
    }) {
      setSize({ width, height });
    },
    []
  );
  useIsomorphicLayoutEffect(() => {
    if (!ref.current) {
      if (process.env.NODE_ENV !== "production") {
        throw new Error(
          "ref returned by useComponentSize was not assigned to a component"
        );
      }
      return;
    }
    handleResize(ref.current.getBoundingClientRect());
    const observer = new ResizeObserver(
      (observerEntries) => {
        handleResize(observerEntries[0].contentRect);
      }
    );
    observer.observe(ref.current);
    return () => {
      observer.disconnect();
    };
  }, [handleResize]);
  return [ref, size];
}

export { useComponentSize };
//# sourceMappingURL=useComponentSize.js.map
