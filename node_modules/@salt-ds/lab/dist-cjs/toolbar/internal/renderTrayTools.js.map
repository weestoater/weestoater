{"version":3,"file":"renderTrayTools.js","sources":["../src/toolbar/internal/renderTrayTools.tsx"],"sourcesContent":["import React, { ReactNode } from \"react\";\nimport {\n  OverflowCollectionHookResult,\n  OverflowItem,\n} from \"../../responsive/overflowTypes\";\nimport {\n  isResponsiveAttribute,\n  liftResponsivePropsToFormField,\n} from \"../../responsive/utils\";\nimport { ToolbarField } from \"../toolbar-field/ToolbarField\";\nimport { OrientationShape } from \"../ToolbarProps\";\n\ntype TooltrayItem = {\n  \"data-priority\"?: number | string;\n  className: string;\n};\n\nexport const renderTrayTools = (\n  collectionHook: OverflowCollectionHookResult,\n  overflowedItems: OverflowItem[],\n  orientation: OrientationShape,\n  collapsed?: boolean | string\n): ReactNode => {\n  if (collapsed) {\n    return [];\n  }\n\n  let index = -1;\n\n  const items = collectionHook.data.filter((item) => !item.isOverflowIndicator);\n\n  return items.map((item) => {\n    index += 1;\n    const props = item.element.props as TooltrayItem;\n\n    const overflowed =\n      overflowedItems.findIndex((i) => i.index === index) === -1\n        ? undefined\n        : true;\n\n    const toolbarItemProps = {\n      \"data-index\": index,\n      \"data-priority\": props[\"data-priority\"] ?? 2,\n      \"data-overflowed\": overflowed,\n      id: item.id,\n      orientation,\n    };\n    if (item.element.type === ToolbarField) {\n      return React.cloneElement(item.element, {\n        key: index,\n        ...toolbarItemProps,\n      });\n    } else {\n      if (Object.keys(props).some(isResponsiveAttribute)) {\n        const [toolbarProps, restProps] = liftResponsivePropsToFormField(props);\n        return (\n          <ToolbarField\n            {...toolbarProps}\n            {...toolbarItemProps}\n            // don't think we need the data-index\n            data-index={index}\n            data-priority={2}\n            key={index}\n            data-orientation={orientation}\n          >\n            {/* We clone here just to remove the responsive props */}\n            {React.cloneElement(item.element, { ...restProps })}\n          </ToolbarField>\n        );\n      } else {\n        return (\n          <ToolbarField\n            {...toolbarItemProps}\n            data-index={index}\n            data-overflowed={overflowed}\n            data-priority={2}\n            key={index}\n            data-orientation={orientation}\n          >\n            {React.cloneElement(item.element, {\n              id: `tooltray-control-${item.id}`,\n            })}\n          </ToolbarField>\n        );\n      }\n    }\n  });\n};\n"],"names":["ToolbarField","React","isResponsiveAttribute","liftResponsivePropsToFormField","createElement"],"mappings":";;;;;;;;;;;;AAiBO,MAAM,eAAkB,GAAA,CAC7B,cACA,EAAA,eAAA,EACA,aACA,SACc,KAAA;AACd,EAAA,IAAI,SAAW,EAAA;AACb,IAAA,OAAO,EAAC,CAAA;AAAA,GACV;AAEA,EAAA,IAAI,KAAQ,GAAA,CAAA,CAAA,CAAA;AAEZ,EAAM,MAAA,KAAA,GAAQ,eAAe,IAAK,CAAA,MAAA,CAAO,CAAC,IAAS,KAAA,CAAC,KAAK,mBAAmB,CAAA,CAAA;AAE5E,EAAO,OAAA,KAAA,CAAM,GAAI,CAAA,CAAC,IAAS,KAAA;AA/B7B,IAAA,IAAA,EAAA,CAAA;AAgCI,IAAS,KAAA,IAAA,CAAA,CAAA;AACT,IAAM,MAAA,KAAA,GAAQ,KAAK,OAAQ,CAAA,KAAA,CAAA;AAE3B,IAAM,MAAA,UAAA,GACJ,eAAgB,CAAA,SAAA,CAAU,CAAC,CAAA,KAAM,EAAE,KAAU,KAAA,KAAK,CAAM,KAAA,CAAA,CAAA,GACpD,KACA,CAAA,GAAA,IAAA,CAAA;AAEN,IAAA,MAAM,gBAAmB,GAAA;AAAA,MACvB,YAAc,EAAA,KAAA;AAAA,MACd,eAAA,EAAA,CAAiB,EAAM,GAAA,KAAA,CAAA,eAAA,CAAA,KAAN,IAA0B,GAAA,EAAA,GAAA,CAAA;AAAA,MAC3C,iBAAmB,EAAA,UAAA;AAAA,MACnB,IAAI,IAAK,CAAA,EAAA;AAAA,MACT,WAAA;AAAA,KACF,CAAA;AACA,IAAI,IAAA,IAAA,CAAK,OAAQ,CAAA,IAAA,KAASA,yBAAc,EAAA;AACtC,MAAO,OAAAC,yBAAA,CAAM,YAAa,CAAA,IAAA,CAAK,OAAS,EAAA;AAAA,QACtC,GAAK,EAAA,KAAA;AAAA,QACL,GAAG,gBAAA;AAAA,OACJ,CAAA,CAAA;AAAA,KACI,MAAA;AACL,MAAA,IAAI,OAAO,IAAK,CAAA,KAAK,CAAE,CAAA,IAAA,CAAKC,2BAAqB,CAAG,EAAA;AAClD,QAAA,MAAM,CAAC,YAAA,EAAc,SAAS,CAAA,GAAIC,qCAA+B,KAAK,CAAA,CAAA;AACtE,QAAA,uBACGC,mBAAA,CAAAJ,yBAAA,EAAA;AAAA,UACE,GAAG,YAAA;AAAA,UACH,GAAG,gBAAA;AAAA,UAEJ,YAAY,EAAA,KAAA;AAAA,UACZ,eAAe,EAAA,CAAA;AAAA,UACf,GAAK,EAAA,KAAA;AAAA,UACL,kBAAkB,EAAA,WAAA;AAAA,SAGjB,EAAAC,yBAAA,CAAM,aAAa,IAAK,CAAA,OAAA,EAAS,EAAE,GAAG,SAAA,EAAW,CACpD,CAAA,CAAA;AAAA,OAEG,MAAA;AACL,QAAA,uBACGG,mBAAA,CAAAJ,yBAAA,EAAA;AAAA,UACE,GAAG,gBAAA;AAAA,UACJ,YAAY,EAAA,KAAA;AAAA,UACZ,iBAAiB,EAAA,UAAA;AAAA,UACjB,eAAe,EAAA,CAAA;AAAA,UACf,GAAK,EAAA,KAAA;AAAA,UACL,kBAAkB,EAAA,WAAA;AAAA,SAEjB,EAAAC,yBAAA,CAAM,YAAa,CAAA,IAAA,CAAK,OAAS,EAAA;AAAA,UAChC,EAAA,EAAI,oBAAoB,IAAK,CAAA,EAAA,CAAA,CAAA;AAAA,SAC9B,CACH,CAAA,CAAA;AAAA,OAEJ;AAAA,KACF;AAAA,GACD,CAAA,CAAA;AACH;;;;"}