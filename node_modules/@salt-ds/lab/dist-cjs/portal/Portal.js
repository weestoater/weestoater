'use strict';

Object.defineProperty(exports, '__esModule', { value: true });

var jsxRuntime = require('react/jsx-runtime');
var React = require('react');
var ReactDOM = require('react-dom');
var core = require('@salt-ds/core');

function getContainer(container) {
  return typeof container === "function" ? container() : container;
}
const DEFAULT_ID = "portal-root";
const Portal = React.forwardRef(function Portal2({
  children,
  container: containerProp = document.body,
  disablePortal = false,
  id = DEFAULT_ID
}, ref) {
  var _a;
  const [mounted, setMounted] = React.useState(false);
  const portalRef = React.useRef(null);
  const handleRef = core.useForkRef(
    React.isValidElement(children) ? children.ref : null,
    ref
  );
  const container = (_a = getContainer(containerProp)) != null ? _a : document.body;
  core.useIsomorphicLayoutEffect(() => {
    const root = core.ownerDocument(container).getElementById(id);
    if (root) {
      portalRef.current = root;
    } else {
      portalRef.current = core.ownerDocument(container).createElement("div");
      portalRef.current.id = id;
    }
    const el = portalRef.current;
    if (!container.contains(el)) {
      container.appendChild(el);
    }
    setMounted(true);
  }, [id, container]);
  if (disablePortal) {
    if (React.isValidElement(children)) {
      return React.cloneElement(children, {
        ref: handleRef
      });
    }
    return /* @__PURE__ */ jsxRuntime.jsx(jsxRuntime.Fragment, {
      children
    });
  }
  if (mounted && portalRef.current && children) {
    return ReactDOM.createPortal(
      /* @__PURE__ */ jsxRuntime.jsx(core.SaltProvider, {
        children
      }),
      portalRef.current
    );
  }
  return null;
});

exports.Portal = Portal;
//# sourceMappingURL=Portal.js.map
