{"version":3,"file":"useMenuTriggerHandlers.js","sources":["../src/cascading-menu/internal/useMenuTriggerHandlers.ts"],"sourcesContent":["import { useEventCallback } from \"../../utils\";\nimport { stateChangeTypes } from \"../stateChangeTypes\";\nimport { CascadingMenuAction } from \"./CascadingMenuAction\";\nimport { CascadingMenuProps } from \"../CascadingMenuProps\";\nimport { menuState } from \"./stateUtils\";\nimport { stateItem } from \"./useStateReducer\";\nimport {\n  HTMLAttributes,\n  isValidElement,\n  MouseEvent,\n  KeyboardEvent,\n} from \"react\";\n\ninterface useMenuTriggerHandlersProps {\n  dispatch: (action: any) => void;\n  children: CascadingMenuProps[\"children\"];\n  setIsNavigatingWithKeyboard: (value: boolean) => void;\n  openCloseMenu: (open: boolean) => void;\n  rootMenuState: stateItem;\n  rootMenuId: string | undefined;\n  menusDataById: Record<string, menuState>;\n}\n\nexport function useMenuTriggerHandlers({\n  dispatch,\n  children,\n  setIsNavigatingWithKeyboard,\n  openCloseMenu,\n  rootMenuState,\n  rootMenuId,\n  menusDataById = {},\n}: useMenuTriggerHandlersProps) {\n  const handleOnClick = useEventCallback((event: MouseEvent<HTMLElement>) => {\n    const { type } = event;\n\n    setIsNavigatingWithKeyboard(false);\n    if (type === \"click\") {\n      if (isValidElement(children)) {\n        const childrenProps = children.props as HTMLAttributes<HTMLElement>;\n        childrenProps.onClick?.(event);\n      }\n      openCloseMenu(!rootMenuState);\n    }\n  });\n\n  const handleOnKeydown = useEventCallback(\n    (event: KeyboardEvent<HTMLElement>) => {\n      const { key } = event;\n\n      switch (key) {\n        case \"Spacebar\":\n        case \" \":\n        case \"Enter\":\n          event.stopPropagation();\n          event.preventDefault();\n          setIsNavigatingWithKeyboard(true);\n          dispatch({\n            type: rootMenuState\n              ? CascadingMenuAction.CLOSE_MENU\n              : CascadingMenuAction.OPEN_MENU,\n            cause: stateChangeTypes.KEYBOARD_TOGGLE,\n            targetId: rootMenuId,\n          });\n          break;\n        case \"ArrowDown\":\n          event.stopPropagation();\n          event.preventDefault();\n          setIsNavigatingWithKeyboard(true);\n          if (rootMenuState) {\n            break;\n          }\n          dispatch({\n            type: CascadingMenuAction.OPEN_MENU,\n            cause: stateChangeTypes.KEYBOARD_TOGGLE,\n            targetId: rootMenuId,\n          });\n          break;\n        case \"ArrowUp\":\n          event.stopPropagation();\n          event.preventDefault();\n          setIsNavigatingWithKeyboard(true);\n          if (rootMenuState || !rootMenuId) {\n            break;\n          }\n          dispatch({\n            type: CascadingMenuAction.OPEN_MENU,\n            cause: stateChangeTypes.KEYBOARD_TOGGLE,\n            targetId: rootMenuId,\n          });\n          dispatch({\n            type: CascadingMenuAction.SET_CURRENT_INTERACTED_ITEM,\n            cause: stateChangeTypes.ITEM_KEYDOWN_ARROW_UP,\n            targetId: rootMenuId,\n            highlightedItemIndex:\n              menusDataById[rootMenuId].menuItems.length - 1,\n          });\n          break;\n        default:\n          break;\n      }\n\n      if (isValidElement(children)) {\n        const childrenProps = children.props as HTMLAttributes<HTMLElement>;\n        childrenProps.onKeyDown?.(event);\n      }\n    }\n  );\n\n  return [handleOnClick, handleOnKeydown] as const;\n}\n"],"names":["useEventCallback","isValidElement","CascadingMenuAction","stateChangeTypes"],"mappings":"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"}