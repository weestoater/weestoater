{"version":3,"file":"stateUtils.js","sources":["../src/cascading-menu/internal/stateUtils.ts"],"sourcesContent":["import { MenuDescriptor } from \"../CascadingMenuProps\";\n\nconst ID_SEPARATOR = \"-\";\n\nexport type menuState = {\n  id: string;\n  flipped?: boolean;\n  highlightedItemIndex?: number;\n  level: number;\n  parentId: string | null;\n  childMenus: {\n    [key: number]: string;\n  };\n  menuItems: MenuDescriptor[];\n};\n\nexport type flattenedMenuState = {\n  [key: string]: menuState;\n};\n\nexport function deriveFlatStateFromTree(\n  tree: MenuDescriptor,\n  parentId: string | null = null,\n  level = 0,\n  generatedId = \"salt-cascading-menu\"\n): flattenedMenuState {\n  const { id = generatedId, menuItems = [] } = tree;\n  return menuItems.reduce(\n    (menuStructure, menuItem, index) => {\n      if (hasSubMenu(menuItem)) {\n        const generatedChildId = [generatedId, index].join(ID_SEPARATOR);\n        menuStructure[id].childMenus[index] = menuItem.id || generatedChildId;\n\n        const innerState = deriveFlatStateFromTree(\n          menuItem,\n          id,\n          level + 1,\n          generatedChildId\n        );\n        return { ...menuStructure, ...innerState };\n      } else {\n        return menuStructure;\n      }\n    },\n    // Initialize the structure with the root menu\n    {\n      [id]: {\n        id,\n        parentId,\n        childMenus: {},\n        menuItems: tree.menuItems,\n        level,\n      },\n    } as flattenedMenuState\n  );\n}\n\nexport function hasSubMenu(item: MenuDescriptor) {\n  return item != null && !!item.menuItems && item.menuItems.length > 0;\n}\n\nexport function isMenuItem(item: MenuDescriptor) {\n  return item != null && !item.menuItems;\n}\n\nexport function hasIcon(item: MenuDescriptor) {\n  return item != null && !!item.icon;\n}\n"],"names":[],"mappings":";;;;AAEA,MAAM,YAAe,GAAA,GAAA,CAAA;AAkBd,SAAS,wBACd,IACA,EAAA,QAAA,GAA0B,MAC1B,KAAQ,GAAA,CAAA,EACR,cAAc,qBACM,EAAA;AACpB,EAAA,MAAM,EAAE,EAAK,GAAA,WAAA,EAAa,SAAY,GAAA,IAAO,GAAA,IAAA,CAAA;AAC7C,EAAA,OAAO,SAAU,CAAA,MAAA;AAAA,IACf,CAAC,aAAe,EAAA,QAAA,EAAU,KAAU,KAAA;AAClC,MAAI,IAAA,UAAA,CAAW,QAAQ,CAAG,EAAA;AACxB,QAAA,MAAM,mBAAmB,CAAC,WAAA,EAAa,KAAK,CAAA,CAAE,KAAK,YAAY,CAAA,CAAA;AAC/D,QAAA,aAAA,CAAc,EAAI,CAAA,CAAA,UAAA,CAAW,KAAS,CAAA,GAAA,QAAA,CAAS,EAAM,IAAA,gBAAA,CAAA;AAErD,QAAA,MAAM,UAAa,GAAA,uBAAA;AAAA,UACjB,QAAA;AAAA,UACA,EAAA;AAAA,UACA,KAAQ,GAAA,CAAA;AAAA,UACR,gBAAA;AAAA,SACF,CAAA;AACA,QAAA,OAAO,EAAE,GAAG,aAAe,EAAA,GAAG,UAAW,EAAA,CAAA;AAAA,OACpC,MAAA;AACL,QAAO,OAAA,aAAA,CAAA;AAAA,OACT;AAAA,KACF;AAAA,IAEA;AAAA,MACE,CAAC,EAAK,GAAA;AAAA,QACJ,EAAA;AAAA,QACA,QAAA;AAAA,QACA,YAAY,EAAC;AAAA,QACb,WAAW,IAAK,CAAA,SAAA;AAAA,QAChB,KAAA;AAAA,OACF;AAAA,KACF;AAAA,GACF,CAAA;AACF,CAAA;AAEO,SAAS,WAAW,IAAsB,EAAA;AAC/C,EAAO,OAAA,IAAA,IAAQ,QAAQ,CAAC,CAAC,KAAK,SAAa,IAAA,IAAA,CAAK,UAAU,MAAS,GAAA,CAAA,CAAA;AACrE,CAAA;AAEO,SAAS,WAAW,IAAsB,EAAA;AAC/C,EAAO,OAAA,IAAA,IAAQ,IAAQ,IAAA,CAAC,IAAK,CAAA,SAAA,CAAA;AAC/B,CAAA;AAEO,SAAS,QAAQ,IAAsB,EAAA;AAC5C,EAAA,OAAO,IAAQ,IAAA,IAAA,IAAQ,CAAC,CAAC,IAAK,CAAA,IAAA,CAAA;AAChC;;;;;;;"}