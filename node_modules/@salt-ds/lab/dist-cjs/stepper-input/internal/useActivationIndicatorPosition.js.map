{"version":3,"file":"useActivationIndicatorPosition.js","sources":["../src/stepper-input/internal/useActivationIndicatorPosition.ts"],"sourcesContent":["import { useDensity, useIsomorphicLayoutEffect } from \"@salt-ds/core\";\nimport { useFormFieldLegacyProps } from \"../../form-field-context-legacy\";\nimport { MutableRefObject } from \"react\";\n\nconst refreshButtonWidth = {\n  touch: 36,\n  low: 28,\n  medium: 24,\n  high: 12,\n};\n\n// The activation indicator icon is absolutely positioned by FormField,\n// and must be offset to accommodate the end adornment added by Stepper Input.\n// Ideally, we should be able to provide an 'activationIndicator' class to FormField to\n// override its default positioning instead of directly repositioning it via its ref.\nexport function useActivationIndicatorPosition(\n  adornmentRef: MutableRefObject<HTMLDivElement | null>,\n  refreshButtonVisible: boolean\n) {\n  const formFieldProps = useFormFieldLegacyProps();\n  const { ref: formFieldRef } = formFieldProps;\n  const density = useDensity();\n\n  useIsomorphicLayoutEffect(() => {\n    let offset;\n    if (adornmentRef && adornmentRef.current !== null) {\n      const marginAdjustment =\n        density === \"high\" || density === \"medium\" ? 2 : 4;\n\n      const secondaryButtonAdjustment = refreshButtonVisible\n        ? 0\n        : refreshButtonWidth[density];\n\n      offset =\n        adornmentRef.current.getBoundingClientRect().width -\n        marginAdjustment -\n        secondaryButtonAdjustment;\n    }\n    if (formFieldRef && formFieldRef.current && offset) {\n      const activationIndicator = formFieldRef.current.getElementsByClassName(\n        \"saltFormActivationIndicator-icon\"\n      ) as HTMLCollectionOf<HTMLElement>;\n      if (activationIndicator.length > 0) {\n        activationIndicator[0].style.transform = `translateX(-${offset}px)`;\n      }\n    }\n  });\n}\n"],"names":["useFormFieldLegacyProps","useDensity","useIsomorphicLayoutEffect"],"mappings":";;;;;;;;AAIA,MAAM,kBAAqB,GAAA;AAAA,EACzB,KAAO,EAAA,EAAA;AAAA,EACP,GAAK,EAAA,EAAA;AAAA,EACL,MAAQ,EAAA,EAAA;AAAA,EACR,IAAM,EAAA,EAAA;AACR,CAAA,CAAA;AAMgB,SAAA,8BAAA,CACd,cACA,oBACA,EAAA;AACA,EAAA,MAAM,iBAAiBA,+CAAwB,EAAA,CAAA;AAC/C,EAAM,MAAA,EAAE,GAAK,EAAA,YAAA,EAAiB,GAAA,cAAA,CAAA;AAC9B,EAAA,MAAM,UAAUC,eAAW,EAAA,CAAA;AAE3B,EAAAC,8BAAA,CAA0B,MAAM;AAC9B,IAAI,IAAA,MAAA,CAAA;AACJ,IAAI,IAAA,YAAA,IAAgB,YAAa,CAAA,OAAA,KAAY,IAAM,EAAA;AACjD,MAAA,MAAM,gBACJ,GAAA,OAAA,KAAY,MAAU,IAAA,OAAA,KAAY,WAAW,CAAI,GAAA,CAAA,CAAA;AAEnD,MAAM,MAAA,yBAAA,GAA4B,oBAC9B,GAAA,CAAA,GACA,kBAAmB,CAAA,OAAA,CAAA,CAAA;AAEvB,MAAA,MAAA,GACE,YAAa,CAAA,OAAA,CAAQ,qBAAsB,EAAA,CAAE,QAC7C,gBACA,GAAA,yBAAA,CAAA;AAAA,KACJ;AACA,IAAI,IAAA,YAAA,IAAgB,YAAa,CAAA,OAAA,IAAW,MAAQ,EAAA;AAClD,MAAM,MAAA,mBAAA,GAAsB,aAAa,OAAQ,CAAA,sBAAA;AAAA,QAC/C,kCAAA;AAAA,OACF,CAAA;AACA,MAAI,IAAA,mBAAA,CAAoB,SAAS,CAAG,EAAA;AAClC,QAAoB,mBAAA,CAAA,CAAA,CAAA,CAAG,KAAM,CAAA,SAAA,GAAY,CAAe,YAAA,EAAA,MAAA,CAAA,GAAA,CAAA,CAAA;AAAA,OAC1D;AAAA,KACF;AAAA,GACD,CAAA,CAAA;AACH;;;;"}