{"version":3,"file":"List.js","sources":["../src/list-deprecated/List.tsx"],"sourcesContent":["import { useForkRef } from \"@salt-ds/core\";\n\nimport {\n  ForwardedRef,\n  forwardRef,\n  KeyboardEvent,\n  ReactElement,\n  useContext,\n  useRef,\n} from \"react\";\n\nimport { ListBase, ListScrollHandles } from \"./ListBase\";\nimport { ListProps, ListSelectionVariant } from \"./ListProps\";\nimport { ListStateContext } from \"./ListStateContext\";\nimport { useList } from \"./useList\";\nimport { useTypeSelect } from \"./useTypeSelect\";\n\nimport {\n  DescendantContext,\n  DescendantProvider,\n} from \"./internal/DescendantContext\";\n\nconst ListWithDescendants = forwardRef(function ListWithDescendants<\n  Item,\n  Variant extends ListSelectionVariant\n>(\n  props: ListProps<Item, Variant>,\n  ref?: ForwardedRef<ListScrollHandles<Item>>\n) {\n  const { items } = useContext(DescendantContext);\n\n  const { focusedRef, state, helpers, listProps } = useList({\n    source: items.current.length ? items.current : [],\n    ...props,\n  });\n\n  const { highlightedIndex } = state;\n  const { setHighlightedIndex, setFocusVisible } = helpers;\n\n  const {\n    disabled,\n    disableTypeToSelect,\n    getItemAtIndex,\n    itemCount,\n    itemToString,\n    onKeyDownCapture: onListKeyDownCapture,\n    ...restListProps\n  } = listProps;\n\n  const { onKeyDownCapture: onTypeSelectKeyDownCapture } = useTypeSelect({\n    getItemAtIndex,\n    highlightedIndex,\n    itemCount,\n    itemToString,\n    setFocusVisible,\n    setHighlightedIndex,\n  });\n\n  const setListRef = useForkRef(focusedRef, props.listRef);\n\n  const handleKeyDownCapture = (event: KeyboardEvent<HTMLDivElement>) => {\n    if (disabled) {\n      return;\n    }\n\n    if (onListKeyDownCapture) {\n      onListKeyDownCapture(event);\n    }\n\n    if (!disableTypeToSelect && onTypeSelectKeyDownCapture) {\n      onTypeSelectKeyDownCapture(event);\n    }\n  };\n\n  return (\n    <ListStateContext.Provider value={{ state, helpers }}>\n      <ListBase\n        listRef={setListRef}\n        ref={ref}\n        {...restListProps}\n        disabled={disabled}\n        getItemAtIndex={getItemAtIndex}\n        itemCount={itemCount}\n        itemToString={itemToString}\n        onKeyDownCapture={handleKeyDownCapture}\n      />\n    </ListStateContext.Provider>\n  );\n}) as <Item, Variant extends ListSelectionVariant>(\n  props: ListProps<Item, Variant> & {\n    ref?: ForwardedRef<ListScrollHandles<Item>>;\n  }\n) => ReactElement<ListProps<Item, Variant>>;\n\nexport const List = forwardRef(function List<\n  Item,\n  Variant extends ListSelectionVariant\n>(\n  props: ListProps<Item, Variant>,\n  ref?: ForwardedRef<ListScrollHandles<Item>>\n) {\n  const itemsRef = useRef([]);\n\n  return (\n    <DescendantProvider items={itemsRef}>\n      <ListWithDescendants<Item, Variant> ref={ref} {...props} />\n    </DescendantProvider>\n  );\n}) as <Item = string, Variant extends ListSelectionVariant = \"default\">(\n  props: ListProps<Item, Variant> & {\n    ref?: ForwardedRef<ListScrollHandles<Item>>;\n  }\n) => ReactElement<ListProps<Item, Variant>>;\n"],"names":["forwardRef","ListWithDescendants","useContext","DescendantContext","useList","useTypeSelect","useForkRef","jsx","ListStateContext","ListBase","List","useRef","DescendantProvider"],"mappings":";;;;;;;;;;;;;AAsBA,MAAM,mBAAsB,GAAAA,gBAAA,CAAW,SAASC,oBAAAA,CAI9C,OACA,GACA,EAAA;AACA,EAAA,MAAM,EAAE,KAAA,EAAU,GAAAC,gBAAA,CAAWC,mCAAiB,CAAA,CAAA;AAE9C,EAAA,MAAM,EAAE,UAAY,EAAA,KAAA,EAAO,OAAS,EAAA,SAAA,KAAcC,eAAQ,CAAA;AAAA,IACxD,QAAQ,KAAM,CAAA,OAAA,CAAQ,MAAS,GAAA,KAAA,CAAM,UAAU,EAAC;AAAA,IAChD,GAAG,KAAA;AAAA,GACJ,CAAA,CAAA;AAED,EAAM,MAAA,EAAE,kBAAqB,GAAA,KAAA,CAAA;AAC7B,EAAM,MAAA,EAAE,mBAAqB,EAAA,eAAA,EAAoB,GAAA,OAAA,CAAA;AAEjD,EAAM,MAAA;AAAA,IACJ,QAAA;AAAA,IACA,mBAAA;AAAA,IACA,cAAA;AAAA,IACA,SAAA;AAAA,IACA,YAAA;AAAA,IACA,gBAAkB,EAAA,oBAAA;AAAA,IACf,GAAA,aAAA;AAAA,GACD,GAAA,SAAA,CAAA;AAEJ,EAAA,MAAM,EAAE,gBAAA,EAAkB,0BAA2B,EAAA,GAAIC,2BAAc,CAAA;AAAA,IACrE,cAAA;AAAA,IACA,gBAAA;AAAA,IACA,SAAA;AAAA,IACA,YAAA;AAAA,IACA,eAAA;AAAA,IACA,mBAAA;AAAA,GACD,CAAA,CAAA;AAED,EAAA,MAAM,UAAa,GAAAC,eAAA,CAAW,UAAY,EAAA,KAAA,CAAM,OAAO,CAAA,CAAA;AAEvD,EAAM,MAAA,oBAAA,GAAuB,CAAC,KAAyC,KAAA;AACrE,IAAA,IAAI,QAAU,EAAA;AACZ,MAAA,OAAA;AAAA,KACF;AAEA,IAAA,IAAI,oBAAsB,EAAA;AACxB,MAAA,oBAAA,CAAqB,KAAK,CAAA,CAAA;AAAA,KAC5B;AAEA,IAAI,IAAA,CAAC,uBAAuB,0BAA4B,EAAA;AACtD,MAAA,0BAAA,CAA2B,KAAK,CAAA,CAAA;AAAA,KAClC;AAAA,GACF,CAAA;AAEA,EACE,uBAAAC,cAAA,CAACC,kCAAiB,QAAjB,EAAA;AAAA,IAA0B,KAAA,EAAO,EAAE,KAAA,EAAO,OAAQ,EAAA;AAAA,IACjD,QAAC,kBAAAD,cAAA,CAAAE,iBAAA,EAAA;AAAA,MACC,OAAS,EAAA,UAAA;AAAA,MACT,GAAA;AAAA,MACC,GAAG,aAAA;AAAA,MACJ,QAAA;AAAA,MACA,cAAA;AAAA,MACA,SAAA;AAAA,MACA,YAAA;AAAA,MACA,gBAAkB,EAAA,oBAAA;AAAA,KACpB,CAAA;AAAA,GACF,CAAA,CAAA;AAEJ,CAAC,CAAA,CAAA;AAMM,MAAM,IAAO,GAAAT,gBAAA,CAAW,SAASU,KAAAA,CAItC,OACA,GACA,EAAA;AACA,EAAM,MAAA,QAAA,GAAWC,YAAO,CAAA,EAAE,CAAA,CAAA;AAE1B,EAAA,uBACGJ,cAAA,CAAAK,oCAAA,EAAA;AAAA,IAAmB,KAAO,EAAA,QAAA;AAAA,IACzB,QAAC,kBAAAL,cAAA,CAAA,mBAAA,EAAA;AAAA,MAAmC,GAAA;AAAA,MAAW,GAAG,KAAA;AAAA,KAAO,CAAA;AAAA,GAC3D,CAAA,CAAA;AAEJ,CAAC;;;;"}