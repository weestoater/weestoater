{"version":3,"file":"useListAutoSizer.js","sources":["../src/list-deprecated/internal/useListAutoSizer.ts"],"sourcesContent":["import { useRef, useState, useCallback, Ref } from \"react\";\nimport { useIsomorphicLayoutEffect } from \"@salt-ds/core\";\n\nexport interface ListAutosizerProps {\n  responsive: boolean;\n  height?: number | string;\n  width?: number | string;\n}\n\ninterface size {\n  height?: number | string;\n  width?: number | string;\n}\n\nexport function useListAutoSizer<Element extends HTMLElement>(\n  props: ListAutosizerProps\n): [Ref<Element>, size] {\n  const { responsive, width, height } = props;\n  const [size, setSize] = useState({ width, height });\n  const ref = useRef<Element>(null);\n\n  const handleResize = useCallback(function handleResize(contentRect: DOMRect) {\n    if (contentRect.width > 0 && contentRect.height > 0) {\n      setSize({\n        width: contentRect.width,\n        height: contentRect.height,\n      });\n    }\n  }, []);\n\n  useIsomorphicLayoutEffect(() => {\n    setSize({ width, height });\n  }, [width, height]);\n\n  useIsomorphicLayoutEffect(() => {\n    if (responsive) {\n      let observer: ResizeObserver;\n      if (ref.current) {\n        handleResize(ref.current.getBoundingClientRect());\n        observer = new ResizeObserver(\n          ([{ contentRect }]: ResizeObserverEntry[]) => {\n            handleResize(contentRect);\n          }\n        );\n        observer.observe(ref.current);\n      }\n      return () => {\n        if (observer) {\n          observer.disconnect();\n        }\n      };\n    }\n  }, [handleResize, responsive]);\n\n  return [ref, size];\n}\n"],"names":["useState","useRef","useCallback","handleResize","useIsomorphicLayoutEffect"],"mappings":";;;;;;;AAcO,SAAS,iBACd,KACsB,EAAA;AACtB,EAAA,MAAM,EAAE,UAAA,EAAY,KAAO,EAAA,MAAA,EAAW,GAAA,KAAA,CAAA;AACtC,EAAM,MAAA,CAAC,MAAM,OAAO,CAAA,GAAIA,eAAS,EAAE,KAAA,EAAO,QAAQ,CAAA,CAAA;AAClD,EAAM,MAAA,GAAA,GAAMC,aAAgB,IAAI,CAAA,CAAA;AAEhC,EAAA,MAAM,YAAe,GAAAC,iBAAA,CAAY,SAASC,aAAAA,CAAa,WAAsB,EAAA;AAC3E,IAAA,IAAI,WAAY,CAAA,KAAA,GAAQ,CAAK,IAAA,WAAA,CAAY,SAAS,CAAG,EAAA;AACnD,MAAQ,OAAA,CAAA;AAAA,QACN,OAAO,WAAY,CAAA,KAAA;AAAA,QACnB,QAAQ,WAAY,CAAA,MAAA;AAAA,OACrB,CAAA,CAAA;AAAA,KACH;AAAA,GACF,EAAG,EAAE,CAAA,CAAA;AAEL,EAAAC,8BAAA,CAA0B,MAAM;AAC9B,IAAQ,OAAA,CAAA,EAAE,KAAO,EAAA,MAAA,EAAQ,CAAA,CAAA;AAAA,GACxB,EAAA,CAAC,KAAO,EAAA,MAAM,CAAC,CAAA,CAAA;AAElB,EAAAA,8BAAA,CAA0B,MAAM;AAC9B,IAAA,IAAI,UAAY,EAAA;AACd,MAAI,IAAA,QAAA,CAAA;AACJ,MAAA,IAAI,IAAI,OAAS,EAAA;AACf,QAAa,YAAA,CAAA,GAAA,CAAI,OAAQ,CAAA,qBAAA,EAAuB,CAAA,CAAA;AAChD,QAAA,QAAA,GAAW,IAAI,cAAA;AAAA,UACb,CAAC,CAAC,EAAE,WAAA,EAAa,CAA6B,KAAA;AAC5C,YAAA,YAAA,CAAa,WAAW,CAAA,CAAA;AAAA,WAC1B;AAAA,SACF,CAAA;AACA,QAAS,QAAA,CAAA,OAAA,CAAQ,IAAI,OAAO,CAAA,CAAA;AAAA,OAC9B;AACA,MAAA,OAAO,MAAM;AACX,QAAA,IAAI,QAAU,EAAA;AACZ,UAAA,QAAA,CAAS,UAAW,EAAA,CAAA;AAAA,SACtB;AAAA,OACF,CAAA;AAAA,KACF;AAAA,GACC,EAAA,CAAC,YAAc,EAAA,UAAU,CAAC,CAAA,CAAA;AAE7B,EAAO,OAAA,CAAC,KAAK,IAAI,CAAA,CAAA;AACnB;;;;"}